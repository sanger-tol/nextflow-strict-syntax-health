Linting Nextflow code..
Linting: conf/test_mouse_all_pep_lengths.config
Linting: conf/base.config
Linting: conf/test_bins_only.config
Linting: conf/test_taxa_only.config
Linting: conf/test_assembly_only.config
Linting: conf/modules.config
Linting: conf/test_mhcflurry.config
Linting: conf/test_mouse.config
Linting: conf/test_model_information.config
Linting: conf/test_full.config
Linting: conf/test.config
Linting: conf/test_mhcnuggets_2.config
Linting: conf/test_mhcnuggets_1.config
Linting: conf/test_coassembly.config
Linting: conf/test_taxa_specific_assembly.config
Linting: conf/test_all.config
Linting: nextflow.config
Linting: workflows/metapep.nf
Linting: subworkflows/local/utils_nfcore_metapep_pipeline/main.nf
Linting: subworkflows/local/process_input.nf
Linting: subworkflows/nf-core/utils_nfcore_pipeline/main.nf
Linting: subworkflows/nf-core/utils_nfcore_pipeline/tests/nextflow.config
Linting: subworkflows/nf-core/utils_nextflow_pipeline/main.nf
Linting: subworkflows/nf-core/utils_nextflow_pipeline/tests/nextflow.config
Linting: subworkflows/nf-core/utils_nfschema_plugin/main.nf
Linting: subworkflows/nf-core/utils_nfschema_plugin/tests/nextflow.config
Linting: main.nf
Linting: tests/nextflow.config
Linting: modules/local/finalize_microbiome_entities.nf
Linting: modules/local/predict_epitopes.nf
Linting: modules/local/unify_model_lengths.nf
Linting: modules/local/download_proteins.nf
Linting: modules/local/unpack_bin_archives.nf
Linting: modules/local/create_protein_tsv.nf
Linting: modules/local/prepare_score_distribution.nf
Linting: modules/local/split_pred_tasks.nf
Linting: modules/local/generate_protein_and_entity_ids.nf
Linting: modules/local/merge_predictions_buffer.nf
Linting: modules/local/prepare_entity_binding_ratios.nf
Linting: modules/local/collect_stats.nf
Linting: modules/local/merge_predictions.nf
Linting: modules/local/check_samplesheet_create_tables.nf
Linting: modules/local/plot_entity_binding_ratios.nf
Linting: modules/local/plot_score_distribution.nf
Linting: modules/local/assign_nucl_entity_weights.nf
Linting: modules/local/generate_peptides.nf
Linting: modules/local/epytope_show_supported_models.nf
Linting: modules/nf-core/multiqc/main.nf
Linting: modules/nf-core/multiqc/tests/nextflow.config
Linting: modules/nf-core/prodigal/main.nf

Error modules/local/collect_stats.nf:24:5: Invalid process output
│  24 |     def score_threshold = params.pred_method != "SYFPEITHI" ? params.m
╰     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

Error modules/local/collect_stats.nf:34:41: `score_threshold` is not defined
│  34 |                     --binder_threshold "$score_threshold"             
╰     |                                         ^^^^^^^^^^^^^^^^


Error modules/local/download_proteins.nf:27:9: `microbiome_ids` is already declared
│  27 |     def microbiome_ids = microbiome_ids.join(' ')
╰     |         ^^^^^^^^^^^^^^











Error modules/local/unify_model_lengths.nf:15:9: `unified_peptide_lengths` is not defined
│  15 |     env unified_peptide_lengths       , emit: unified_pep_lens
╰     |         ^^^^^^^^^^^^^^^^^^^^^^^




Error subworkflows/local/process_input.nf:136:103: `microbiome_id` is not defined
│ 136 |  provided for microbiome ID ${microbiome_id} did not yield any bin fil
╰     |                               ^^^^^^^^^^^^^

Warn  subworkflows/local/process_input.nf:15:19: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  15 |     ch_versions = Channel.empty()
╰     |                   ^^^^^^^

Warn  subworkflows/local/process_input.nf:39:27: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  39 |         peptide_lengths = Channel.fromList( params.min_pep_len..params
╰     |                           ^^^^^^^

Warn  subworkflows/local/process_input.nf:102:78: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 102 | ome_path.listFiles().findAll{ it.name =~ fasta_suffix }
╰     |                               ^^

Warn  subworkflows/local/process_input.nf:106:45: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 106 |                         meta.bin_basename = it.name - fasta_suffix
╰     |                                             ^^

Warn  subworkflows/local/process_input.nf:107:40: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 107 |                         return [ meta, it ]
╰     |                                        ^^

Warn  subworkflows/local/process_input.nf:132:34: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 132 |         ch_bins_archives_input = Channel.empty()
╰     |                                  ^^^^^^^

Warn  subworkflows/local/process_input.nf:135:52: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 135 |                     bin_files = bin_files.findAll{ it.name =~ fasta_su
╰     |                                                    ^^

Warn  subworkflows/local/process_input.nf:140:49: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 140 |                         meta_new.bin_basename = it.name - fasta_suffix
╰     |                                                 ^^

Warn  subworkflows/local/process_input.nf:141:44: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 141 |                         return [ meta_new, it ]
╰     |                                            ^^

Warn  subworkflows/local/process_input.nf:154:22: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 154 |         ch_weights = Channel.empty()
╰     |                      ^^^^^^^


Warn  subworkflows/local/utils_nfcore_metapep_pipeline/main.nf:31:5: Parameter was not used -- prefix with `_` to suppress warning
│  31 |     monochrome_logs   // boolean: Do not use coloured log outputs
╰     |     ^^^^^^^^^^^^^^^

Warn  subworkflows/local/utils_nfcore_metapep_pipeline/main.nf:38:19: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  38 |     ch_versions = Channel.empty()
╰     |                   ^^^^^^^

Warn  subworkflows/local/utils_nfcore_metapep_pipeline/main.nf:69:53: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  69 |     ch_samplesheet = params.show_supported_models ? Channel.empty() : 
╰     |                                                     ^^^^^^^

Warn  subworkflows/local/utils_nfcore_metapep_pipeline/main.nf:69:71: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  69 | ed_models ? Channel.empty() : Channel.fromPath(input, checkIfExists: t
╰     |                               ^^^^^^^



Warn  subworkflows/nf-core/utils_nfcore_pipeline/main.nf:101:98: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 101 | mYAML(version) }.unique().mix(Channel.of(workflowVersionToYAML()))
╰     |                               ^^^^^^^


Warn  workflows/metapep.nf:49:19: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  49 |     ch_versions = Channel.empty()
╰     |                   ^^^^^^^

Warn  workflows/metapep.nf:50:24: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│  50 |     ch_multiqc_files = Channel.empty()
╰     |                        ^^^^^^^

Warn  workflows/metapep.nf:71:57: Parameter was not used -- prefix with `_` to suppress warning
│  71 |             PROCESS_INPUT.out.ch_taxa_input.map { meta, file -> meta.i
╰     |                                                         ^^^^

Warn  workflows/metapep.nf:72:51: Parameter was not used -- prefix with `_` to suppress warning
│  72 |             PROCESS_INPUT.out.ch_taxa_input.map { meta, file -> file }
╰     |                                                   ^^^^

Warn  workflows/metapep.nf:94:54: Parameter was not used -- prefix with `_` to suppress warning
│  94 |             PROCESS_INPUT.out.ch_weights.map { meta, file -> meta.id }
╰     |                                                      ^^^^

Warn  workflows/metapep.nf:95:48: Parameter was not used -- prefix with `_` to suppress warning
│  95 |             PROCESS_INPUT.out.ch_weights.map { meta, file -> file }.co
╰     |                                                ^^^^

Warn  workflows/metapep.nf:108:47: Parameter was not used -- prefix with `_` to suppress warning
│ 108 |             ch_pred_proteins_sorted.collect { meta, file -> file }.ifE
╰     |                                               ^^^^

Warn  workflows/metapep.nf:109:53: Parameter was not used -- prefix with `_` to suppress warning
│ 109 |             ch_pred_proteins_sorted.collect { meta, file -> meta }.ifE
╰     |                                                     ^^^^

Warn  workflows/metapep.nf:203:61: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 203 | ns_input_pred.collect(sort: { it.baseName }),
╰     |                               ^^

Warn  workflows/metapep.nf:204:61: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 204 | ns_input_warn.collect(sort: { it.baseName })
╰     |                               ^^

Warn  workflows/metapep.nf:281:32: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 281 |     ch_multiqc_config        = Channel.fromPath(
╰     |                                ^^^^^^^

Warn  workflows/metapep.nf:284:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 284 |         Channel.fromPath(params.multiqc_config, checkIfExists: true) :
╰     |         ^^^^^^^

Warn  workflows/metapep.nf:285:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 285 |         Channel.empty()
╰     |         ^^^^^^^

Warn  workflows/metapep.nf:287:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 287 |         Channel.fromPath(params.multiqc_logo, checkIfExists: true) :
╰     |         ^^^^^^^

Warn  workflows/metapep.nf:288:9: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 288 |         Channel.fromPath("$projectDir/assets/nf-core-metapep_logo_ligh
╰     |         ^^^^^^^

Warn  workflows/metapep.nf:292:27: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 292 |     ch_workflow_summary = Channel.value(paramsSummaryMultiqc(summary_p
╰     |                           ^^^^^^^

Warn  workflows/metapep.nf:298:45: The use of `Channel` to access channel factories is deprecated -- use `channel` instead
│ 298 |     ch_methods_description                = Channel.value(
╰     |                                             ^^^^^^^

Warn  workflows/metapep.nf:321:5: Variable was declared but not used
│ 321 |     multiqc_report = MULTIQC.out.report.toList()
╰     |     ^^^^^^^^^^^^^^


Error nextflow.config:324:31: `manifest` is not defined
│ 324 | \033[0;35m  nf-core/metapep ${manifest.version}\033[0m
╰     |                               ^^^^^^^^

Error nextflow.config:327:26: `manifest` is not defined
│ 327 |         afterText = """${manifest.doi ? "\n* The pipeline\n" : ""}${ma
╰     |                          ^^^^^^^^

Error nextflow.config:327:69: `manifest` is not defined
│ 327 | ? "\n* The pipeline\n" : ""}${manifest.doi.tokenize(",").collect { "  
╰     |                               ^^^^^^^^

Error nextflow.config:327:186: `manifest` is not defined
│ 327 | doi.org/','')}"}.join("\n")}${manifest.doi ? "\n" : ""}
╰     |                               ^^^^^^^^

Error nextflow.config:336:22: `validation` is not defined
│ 336 |         beforeText = validation.help.beforeText
╰     |                      ^^^^^^^^^^

Error nextflow.config:337:21: `validation` is not defined
│ 337 |         afterText = validation.help.afterText
╰     |                     ^^^^^^^^^^

Warn  nextflow.config:327:129: Implicit closure parameter is deprecated, declare an explicit parameter instead
│ 327 | lect { "    https://doi.org/${it.trim().replace('https://doi.org/','')
╰     |                               ^^


Nextflow linting complete!
 ❌ 5 files had 11 errors
 ✅ 45 files had no errors
